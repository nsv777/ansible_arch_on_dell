---
- name: "/etc/locale.gen: uncomment locale {{ locale }}"
  ansible.builtin.replace:
    dest: /etc/locale.gen
    regexp: '^#{{ locale }} UTF-8.*$'
    replace: '{{ locale }} UTF-8'
  become: true
  notify: generate_locales
  tags:
    - locale


- name: Generate locales
  ansible.builtin.meta: flush_handlers


- name: "Setting locale to {{ locale }}"
  ansible.builtin.command: 'localectl set-locale LANG="{{ locale }}"'
  changed_when: false
  become: true
  tags:
    - locale

---
- name: "Uncomment locale {{ locale }} in /etc/locale.gen"
  replace:
    dest: /etc/locale.gen
    regexp: '^#{{ locale }} UTF-8.*$'
    replace: '{{ locale }} UTF-8'
  become: yes
  notify: generate_locales
  tags:
    - locale


- name: Generate locales
  meta: flush_handlers


- name: "Setting locale to {{ locale }}"
  command: 'localectl set-locale LANG="{{ locale }}"'
  become: yes
  tags:
    - locale
